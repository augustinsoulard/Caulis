"0","knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)"
"0",""
"0","# Fonction d'aide pour traiter et intégrer les images"
"0","process_and_embed_image <- function(relative_path, base_path, caption = """", dpi = 300) {"
"0","  # Supprimer le double ""DCIM/"""
"0","  relative_path <- sub(""^DCIM/"", """", relative_path)"
"0","  full_path <- file.path(base_path, relative_path)"
"0",""
"0","  if (!file.exists(full_path)) {"
"0","    cat(paste(""⚠️ Fichier introuvable :"", full_path, ""\n""))"
"0","    return()"
"0","  }"
"0",""
"0","  temp_dir <- ""output/temp_images"""
"0","  if (!dir.exists(temp_dir)) {"
"0","    dir.create(temp_dir, recursive = TRUE)"
"0","  }"
"0",""
"0","  temp_image_path <- file.path(temp_dir, basename(relative_path))"
"0",""
"0","  tryCatch({"
"0","    cat(""✔️ Image détectée :"", full_path, ""\n"")"
"0","    img <- image_read(full_path)"
"0","    img_compressed <- image_convert(img, format = 'jpeg')  # plus de dpi ici"
"0","    image_write(img_compressed, path = temp_image_path)    # ni ici"
"0","    print(knitr::include_graphics(temp_image_path))"
"0","  }, error = function(e) {"
"0","    cat(paste(""❌ Erreur lors du traitement de l'image :"", full_path, ""\n"", e$message, ""\n""))"
"0","  })"
"0","}"
"0",""
